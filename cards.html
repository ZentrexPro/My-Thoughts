<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Casino Card Guessing</title>
  <style>
    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: radial-gradient(circle at center, #111 0%, #222 100%);
      color: #fff;
      text-align: center;
    }
    h1 {
      margin: 20px 0;
      font-size: 2rem;
      color: #ffcc00;
      text-shadow: 0 0 12px #ff6600;
    }
    #controls { margin: 15px 0; }
    select, button {
      padding: 10px 14px;
      font-size: 1rem;
      border-radius: 8px;
      border: none;
      margin: 5px;
      cursor: pointer;
    }
    button {
      background: linear-gradient(145deg,#ff6600,#ffcc00);
      color: #111;
      font-weight: bold;
    }
    #timer {
      font-size: 1.4rem;
      margin: 10px;
      color: #0ff;
      text-shadow: 0 0 8px #0ff;
    }
    #cards {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 15px;
      margin-top: 20px;
      perspective: 1000px;
    }
    .card {
      width: 100px;
      height: 140px;
      position: relative;
      transform-style: preserve-3d;
      transition: transform .6s;
      cursor: pointer;
    }
    .card.flipped { transform: rotateY(180deg); }
    .card-face {
      position: absolute;
      width: 100%;
      height: 100%;
      border-radius: 10px;
      backface-visibility: hidden;
      overflow: hidden;
      box-shadow: 0 0 15px rgba(255,255,255,.3);
    }
    .card-face img { width: 100%; height: 100%; object-fit: cover; }
    .back { transform: rotateY(180deg); }
    #result {
      font-size: 1.6rem;
      margin-top: 18px;
      font-weight: bold;
    }
    .win { color: #0f0; text-shadow: 0 0 8px #0f0; }
    .loss { color: #f33; text-shadow: 0 0 8px #f33; }
    .back-btn {
      position: absolute;
      top: 10px; left: 12px;
    }
    .back-btn a { color: #9fe; text-decoration: none; font-weight: 600; }
  </style>
</head>
<body>
  <div class="back-btn"><a href="games.html">‚Üê Back</a></div>
  <h1>üé¥ Casino Card Guessing üé≤</h1>

  <div id="controls">
    <select id="guess"><option disabled selected>Select Your Card</option></select>
    <button onclick="startGame()">Start Game</button>
  </div>

  <div id="timer">‚è≥ 20</div>
  <div id="cards"></div>
  <div id="result"></div>

  <audio id="flipSound" src="https://assets.mixkit.co/sfx/preview/mixkit-fast-card-flip-2110.mp3"></audio>
  <audio id="winSound" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3"></audio>
  <audio id="loseSound" src="https://assets.mixkit.co/sfx/preview/mixkit-retro-game-notification-212.mp3"></audio>

  <script>
    const suits = ['‚ô†','‚ô•','‚ô¶','‚ô£'];
    const values = ['A','2','3','4','5','6','7','8','9','10','J','Q','K'];
    let deck = [], timerInterval;

    function createDeck() {
      deck = [];
      for (let s of suits) {
        for (let v of values) { deck.push(v + s); }
      }
    }

    function loadGuessOptions() {
      const select = document.getElementById('guess');
      select.innerHTML = '<option disabled selected>Select Your Card</option>';
      deck.forEach(c=>{
        let opt=document.createElement("option");
        opt.value=c; opt.innerText=c;
        select.appendChild(opt);
      });
    }

    function shuffle(arr){
      for(let i=arr.length-1;i>0;i--){
        let j=Math.floor(Math.random()*(i+1));
        [arr[i],arr[j]]=[arr[j],arr[i]];
      }
      return arr;
    }

    function startGame(){
      let guess=document.getElementById('guess').value;
      if(!guess||guess==="Select Your Card"){ alert("Please select a card!"); return; }

      document.getElementById('result').innerHTML="";
      let cardsDiv=document.getElementById('cards'); cardsDiv.innerHTML="";
      let picked=shuffle([...deck]).slice(0,7);

      picked.forEach(card=>{
        let div=document.createElement('div'); div.className="card";
        div.innerHTML=`
          <div class="card-face front">
            <img src="https://deckofcardsapi.com/static/img/${mapCardImage(card)}" alt="${card}">
          </div>
          <div class="card-face back">
            <img src="https://i.ibb.co/fnKmd4H/flower-back.jpg" alt="Back">
          </div>`;
        cardsDiv.appendChild(div);
      });

      let time=20;
      document.getElementById('timer').innerText="‚è≥ "+time;
      clearInterval(timerInterval);
      timerInterval=setInterval(()=>{
        time--;
        document.getElementById('timer').innerText="‚è≥ "+time;
        document.querySelectorAll('.card').forEach(c=>{
          if(Math.random()>0.5){
            c.classList.toggle('flipped');
            document.getElementById('flipSound').play();
          }
        });
        if(time<=0){ clearInterval(timerInterval); checkResult(guess,picked); }
      },1000);
    }

    function checkResult(guess,picked){
      let resultDiv=document.getElementById('result');
      if(picked.includes(guess)){
        resultDiv.innerHTML="üéâ You WIN! üéâ<br><button onclick='startGame()'>Play Again</button>";
        resultDiv.className="win";
        document.getElementById('winSound').play();
      } else {
        resultDiv.innerHTML="‚ùå You LOSE!<br><button onclick='startGame()'>Try Again</button>";
        resultDiv.className="loss";
        document.getElementById('loseSound').play();
      }
    }

    function mapCardImage(card){
      let value=card.slice(0,-1);
      let suit=card.slice(-1);
      let suitLetter={'‚ô†':'S','‚ô•':'H','‚ô¶':'D','‚ô£':'C'}[suit];
      if(value==="10") value="0"; // API fix for 10
      return value+suitLetter+".png";
    }

    createDeck(); loadGuessOptions();
  </script>
</body>
  </html>
