<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Futuristic Handwriting Quote + Messages</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Audiowide&family=Perfecto+Calligraphy&display=swap" rel="stylesheet">

<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WYSBQ3FW82"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-WYSBQ3FW82', { 'transport_type': 'beacon', 'anonymize_ip': false });

document.addEventListener("DOMContentLoaded", () => {
    const ref = document.referrer.toLowerCase();
    if(ref.includes("instagram.com") || ref.includes("l.instagram.com")){
        gtag('event','visit_from_instagram',{event_category:'Referral',event_label:ref});
    }
});
</script>

<style>
html, body {
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  overflow:auto;
  background:#000;
  font-family: 'Perfecto Calligraphy', cursive;
  color:#ddd;
}

/* Particle background */
canvas#bg {
  position:fixed;
  top:0; left:0;
  width:100%;
  height:100%;
  z-index:0;
}

/* Quote container */
.quote-container {
  position:relative;
  max-width:90%;
  margin:40px auto;
  padding:25px 35px;
  text-align:center;
  z-index:1;
  border: 2px solid #fff;
  border-radius:25px;
  box-shadow: 0 0 15px #fff, 0 0 30px #fff;
  background: rgba(0,0,0,0.3);
}

.quote-container h1 {
  font-family:'Audiowide', sans-serif;
  font-size:2rem;
  margin-bottom:15px;
  color:#0ff;
  text-shadow: 0 0 8px #0ff;
}

.quote-container h3 {
  font-family:'Perfecto Calligraphy', cursive;
  font-size:1.8rem;
  line-height:1.6;
  color:#ddd;
  text-shadow: 0 0 4px #0ff;
  white-space:pre-wrap;
  overflow:hidden;
}

.cursor {
  display:inline-block;
  width:2px;
  background:#0ff;
  margin-left:2px;
  animation: blink 0.8s infinite;
}

@keyframes blink {
  0%,50%,100%{opacity:1;}
  25%,75%{opacity:0;}
}

/* Message box */
.message-box {
  position:relative;
  max-width:600px;
  margin:40px auto;
  padding:20px;
  border: 2px solid #fff;
  border-radius:15px;
  background: rgba(0,0,0,0.3);
  box-shadow: 0 0 10px #fff;
}

.message-box h2 {
  text-align:center;
  margin-bottom:10px;
  color:#0ff;
  font-family:'Audiowide', sans-serif;
}

.message-box textarea {
  width:100%;
  height:80px;
  padding:10px;
  border-radius:10px;
  border:1px solid #0ff;
  background:#111;
  color:#ddd;
  resize:none;
  font-family: 'Perfecto Calligraphy', cursive;
  font-size:1rem;
}

.message-box button {
  margin-top:10px;
  padding:10px 20px;
  border:none;
  border-radius:10px;
  background:#0ff;
  color:#000;
  font-weight:bold;
  cursor:pointer;
}

#messages-list {
  margin-top:20px;
  max-height:300px;
  overflow-y:auto;
}

.message-item {
  background:#111;
  border:1px solid #0ff;
  border-radius:10px;
  padding:10px;
  margin-bottom:10px;
  word-wrap:break-word;
  position:relative;
}

.message-item .delete-btn {
  position:absolute;
  top:5px;
  right:5px;
  background:#ff0000;
  color:#fff;
  border:none;
  border-radius:5px;
  padding:2px 6px;
  cursor:pointer;
}
</style>
</head>
<body>

<canvas id="bg"></canvas>

<div class="quote-container">
  <h1>@nextgenn__word</h1>
  <h3 id="quote-text"></h3>
</div>

<div class="message-box">
  <h2>Write message without your identity</h2>
  <textarea id="message-input" placeholder="Type your anonymous message here..."></textarea>
  <button id="send-btn">Send</button>
  <div id="messages-list"></div>
</div>

<!-- Background music -->
<audio id="bg-music" loop>
  <source src="music.mp3" type="audio/mpeg">
  Your browser does not support the audio element.
</audio>

<script>
// Particle background
const canvas = document.getElementById('bg');
const ctx = canvas.getContext('2d');
let particles = [];
const particleCount = 120;

function initParticles(){
  particles = [];
  for(let i=0;i<particleCount;i++){
    particles.push({
      x: Math.random()*canvas.width,
      y: Math.random()*canvas.height,
      r: Math.random()*2+1,
      dx: (Math.random()-0.5)*0.6,
      dy: (Math.random()-0.5)*0.6,
      color: `hsl(${Math.random()*360}, 80%, 60%)`
    });
  }
}

function resizeCanvas(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  initParticles();
}
window.addEventListener('resize', resizeCanvas);
resizeCanvas();

function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  particles.forEach(p=>{
    ctx.beginPath();
    ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
    ctx.fillStyle=p.color;
    ctx.fill();
    p.x += p.dx; p.y += p.dy;
    if(p.x<0)p.x=canvas.width;
    if(p.x>canvas.width)p.x=0;
    if(p.y<0)p.y=canvas.height;
    if(p.y>canvas.height)p.y=0;
  });
  requestAnimationFrame(animate);
}
animate();

// Typewriter effect
const text = "You deserve like a gold ðŸª™ <br>and<br> I deserve like a diamond ðŸ’Ž";
const target = document.getElementById('quote-text');
let index = 0;
function typeWriter(){
  if(index < text.length){
    let char = text.charAt(index);
    if(char !== '<'){
      const span = document.createElement('span');
      span.innerHTML = char;
      target.appendChild(span);
      index++;
      setTimeout(typeWriter, 70);
    } else {
      if(text.substring(index,index+4)==='<br>'){
        target.innerHTML += '<br>';
        index +=4;
      } else {
        index++;
      }
      typeWriter();
    }
  } else {
    const cursor = document.createElement('span');
    cursor.classList.add('cursor');
    target.appendChild(cursor);
  }
}
typeWriter();

// Message system using localStorage (fixed duplicate)
const sendBtn = document.getElementById('send-btn');
const input = document.getElementById('message-input');
const messagesList = document.getElementById('messages-list');

// Load messages from localStorage
function loadMessages(){
  messagesList.innerHTML = ''; // clear existing messages
  const messages = JSON.parse(localStorage.getItem('messages') || '[]');
  messages.forEach((msg, i)=>{
    const div = document.createElement('div');
    div.classList.add('message-item');
    div.innerHTML = `<strong>${msg.name}</strong>: ${msg.text} <button class="delete-btn" data-index="${i}">X</button>`;
    messagesList.appendChild(div);
  });
}

// Save new message
sendBtn.addEventListener('click', (e)=>{
  e.preventDefault();
  const value = input.value.trim();
  if(!value) return;
  const messages = JSON.parse(localStorage.getItem('messages') || '[]');
  messages.push({name:'Anonymous', text:value});
  localStorage.setItem('messages', JSON.stringify(messages));
  input.value = '';
  loadMessages();
});

// Delete message
messagesList.addEventListener('click', (e)=>{
  if(e.target.classList.contains('delete-btn')){
    const index = e.target.dataset.index;
    let messages = JSON.parse(localStorage.getItem('messages') || '[]');
    messages.splice(index,1);
    localStorage.setItem('messages', JSON.stringify(messages));
    loadMessages();
  }
});

loadMessages();

// Background music play on first click
const bgMusic = document.getElementById('bg-music');
document.addEventListener('click', () => {
  if(bgMusic.paused){
    bgMusic.play();
  }
});
</script>

</body>
    </html>
