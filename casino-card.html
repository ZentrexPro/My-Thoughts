<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Casino Card Guessing Game</title>
  <style>
    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: radial-gradient(circle at center, #111 0%, #222 100%);
      color: #fff;
      text-align: center;
      overflow-x: hidden;
    }

    h1 {
      margin-top: 20px;
      font-size: 2.5rem;
      color: #ffcc00;
      text-shadow: 0 0 15px #ff6600;
    }

    #controls {
      margin: 15px 0;
    }

    select, button {
      padding: 10px 15px;
      font-size: 1.1rem;
      border-radius: 8px;
      border: none;
      margin: 5px;
      cursor: pointer;
    }

    button {
      background: linear-gradient(145deg, #ff6600, #ffcc00);
      color: #111;
      font-weight: bold;
      box-shadow: 0 0 15px #ff6600;
    }

    button:hover {
      transform: scale(1.05);
    }

    #timer {
      font-size: 1.5rem;
      margin: 10px;
      color: #0ff;
      text-shadow: 0 0 10px #0ff;
    }

    #cards {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 20px;
      perspective: 1200px;
      flex-wrap: wrap;
    }

    .card {
      width: 100px;
      height: 140px;
      border-radius: 10px;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.8s;
      cursor: pointer;
    }

    .card.flipped {
      transform: rotateY(180deg);
    }

    .card-face {
      position: absolute;
      width: 100%;
      height: 100%;
      border-radius: 10px;
      backface-visibility: hidden;
      overflow: hidden;
      box-shadow: 0 0 15px rgba(255,255,255,0.4);
    }

    .front img, .back img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .back {
      transform: rotateY(180deg);
      background: #fff;
    }

    #result {
      font-size: 1.8rem;
      margin-top: 20px;
      font-weight: bold;
    }

    .win {
      color: #0f0;
      text-shadow: 0 0 10px #0f0;
    }

    .loss {
      color: #f00;
      text-shadow: 0 0 10px #f00;
    }
  </style>
</head>
<body>
  <h1>üé¥ Casino Card Guessing üé≤</h1>

  <div id="controls">
    <select id="guess">
      <option disabled selected>Select Your Card</option>
    </select>
    <button onclick="startGame()">Start Game</button>
  </div>

  <div id="timer">‚è≥ 20</div>

  <div id="cards"></div>

  <div id="result"></div>

  <audio id="flipSound" src="https://assets.mixkit.co/sfx/preview/mixkit-fast-card-flip-2110.mp3"></audio>
  <audio id="winSound" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3"></audio>
  <audio id="loseSound" src="https://assets.mixkit.co/sfx/preview/mixkit-retro-game-notification-212.mp3"></audio>

  <script>
    const suits = ['‚ô†', '‚ô•', '‚ô¶', '‚ô£'];
    const values = ['A','2','3','4','5','6','7','8','9','10','J','Q','K'];
    let deck = [];
    let timerInterval;

    // Create Deck
    function createDeck() {
      deck = [];
      for (let s of suits) {
        for (let v of values) {
          deck.push(v + s);
        }
      }
    }

    // Populate guess dropdown
    function loadGuessOptions() {
      const select = document.getElementById('guess');
      select.innerHTML = '<option disabled selected>Select Your Card</option>';
      deck.forEach(card => {
        let opt = document.createElement("option");
        opt.value = card;
        opt.innerText = card;
        select.appendChild(opt);
      });
    }

    // Shuffle
    function shuffleDeck(array) {
      for (let i = array.length - 1; i > 0; i--) {
        let j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function startGame() {
      let guess = document.getElementById('guess').value;
      if (!guess || guess === "Select Your Card") {
        alert("Please select a card to guess!");
        return;
      }

      document.getElementById('result').innerHTML = "";
      let cardsDiv = document.getElementById('cards');
      cardsDiv.innerHTML = "";

      // Shuffle full deck (52 cards)
      let shuffled = shuffleDeck([...deck]);

      // Pick all 52 cards
      let picked = shuffled;  

      picked.forEach(card => {
        let div = document.createElement('div');
        div.className = "card";

        div.innerHTML = `
          <div class="card-face front">
            <img src="https://deckofcardsapi.com/static/img/${mapCardImage(card)}" alt="${card}">
          </div>
          <div class="card-face back">
            <img src="card-bg.jpg" alt="Custom Back">
          </div>
        `;
        cardsDiv.appendChild(div);
      });

      // Timer setup
      let time = 20;
      document.getElementById('timer').innerText = "‚è≥ " + time;
      clearInterval(timerInterval);

      timerInterval = setInterval(() => {
        time--;
        document.getElementById('timer').innerText = "‚è≥ " + time;

        // Flip all cards randomly once per tick
        document.querySelectorAll('.card').forEach(c => {
          if (Math.random() > 0.5) {
            c.classList.toggle('flipped');
            document.getElementById('flipSound').play();
          }
        });

        if (time <= 0) {
          clearInterval(timerInterval);
          checkResult(guess, picked);
        }
      }, 1000);
    }

    function checkResult(guess, picked) {
      let resultDiv = document.getElementById('result');
      if (picked.includes(guess)) {
        resultDiv.innerHTML = "üéâ You WIN! üéâ <br><button onclick='startGame()'>Play Again</button>";
        resultDiv.className = "win";
        document.getElementById('winSound').play();
        vibrate();
      } else {
        resultDiv.innerHTML = "‚ùå You LOSE! <br><button onclick='startGame()'>Try Again</button>";
        resultDiv.className = "loss";
        document.getElementById('loseSound').play();
        vibrate();
      }
    }

    function mapCardImage(card) {
      let value = card.slice(0, -1);
      let suit = card.slice(-1);
      let suitLetter = { '‚ô†':'S', '‚ô•':'H', '‚ô¶':'D', '‚ô£':'C' }[suit];
      if (value === "10") value = "0"; // API special case
      return value + suitLetter + ".png";
    }

    function vibrate() {
      if (navigator.vibrate) {
        navigator.vibrate(200);
      }
    }

    // Initialize
    createDeck();
    loadGuessOptions();
  </script>
</body>
</html>
